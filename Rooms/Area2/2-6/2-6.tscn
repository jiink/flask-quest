[gd_scene load_steps=41 format=2]

[ext_resource path="res://Rooms/Area2/2-6/2-6.tmx" type="PackedScene" id=1]
[ext_resource path="res://Rooms/Tools/UnshadedMaterial.tres" type="Material" id=2]
[ext_resource path="res://Rooms/TemplateRoom.tscn" type="PackedScene" id=3]
[ext_resource path="res://Rooms/Area2/Assets/pizza_door.png" type="Texture" id=4]
[ext_resource path="res://Rooms/Area2/Assets/PropScenes/glassdoor_full.gd" type="Script" id=5]
[ext_resource path="res://Engine/CollisionTileExt.tres" type="TileSet" id=6]
[ext_resource path="res://Engine/light2.png" type="Texture" id=7]
[ext_resource path="res://Rooms/Tools/PositionPortal.tscn" type="PackedScene" id=8]
[ext_resource path="res://Rooms/Tools/ScenePortal.tscn" type="PackedScene" id=9]
[ext_resource path="res://NPC/NPCWalking/NPCWalking.tscn" type="PackedScene" id=10]
[ext_resource path="res://Rooms/Area2/2-6/MalusHinterPizza.gd" type="Script" id=11]
[ext_resource path="res://Rooms/Area2/Assets/MalusHinter_faces.png" type="Texture" id=12]
[ext_resource path="res://Engine/dialogue/DialogueTree.tscn" type="PackedScene" id=13]
[ext_resource path="res://Engine/dialogue/DiagPiece.tscn" type="PackedScene" id=14]
[ext_resource path="res://Player/Orange.tscn" type="PackedScene" id=15]
[ext_resource path="res://Rooms/Area2/Assets/MalusHinter.tres" type="SpriteFrames" id=16]
[ext_resource path="res://Rooms/Area2/Assets/club_ari.png" type="Texture" id=17]
[ext_resource path="res://Rooms/Area2/Assets/club_whiteboard.png" type="Texture" id=18]
[ext_resource path="res://Rooms/Area2/Assets/club_couch.png" type="Texture" id=19]
[ext_resource path="res://NPC/NPCBasic/NPCBasic.tscn" type="PackedScene" id=20]
[ext_resource path="res://Rooms/Area2/Assets/club_alex.png" type="Texture" id=21]
[ext_resource path="res://Rooms/Area2/Assets/club_chair.png" type="Texture" id=22]
[ext_resource path="res://Rooms/Area2/Assets/club_rug.png" type="Texture" id=23]
[ext_resource path="res://Rooms/Area2/Assets/club_table.png" type="Texture" id=24]
[ext_resource path="res://Rooms/Area2/Assets/club_chair_tilted.png" type="Texture" id=25]
[ext_resource path="res://Rooms/Area2/Assets/club_alice.png" type="Texture" id=26]
[ext_resource path="res://Rooms/Area2/Assets/club_ari_face.png" type="Texture" id=27]

[sub_resource type="RectangleShape2D" id=1]
extents = Vector2( 12, 18 )

[sub_resource type="Animation" id=2]
resource_name = "close"
length = 0.5
tracks/0/type = "value"
tracks/0/path = NodePath(".:frame")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/keys = {
"times": PoolRealArray( 0, 0.1, 0.2, 0.3 ),
"transitions": PoolRealArray( 1, 1, 1, 1 ),
"update": 1,
"values": [ 3, 2, 1, 0 ]
}

[sub_resource type="Animation" id=3]
resource_name = "open"
length = 0.5
tracks/0/type = "value"
tracks/0/path = NodePath(".:frame")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/keys = {
"times": PoolRealArray( 0, 0.1, 0.2, 0.3 ),
"transitions": PoolRealArray( 1, 1, 1, 1 ),
"update": 1,
"values": [ 0, 1, 2, 3 ]
}

[sub_resource type="Animation" id=4]
resource_name = "enter_club"
length = 4.0
tracks/0/type = "value"
tracks/0/path = NodePath(".:position")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/keys = {
"times": PoolRealArray( 0, 0.4, 1, 1.2, 1.8, 2, 3.5, 3.7, 3.8 ),
"transitions": PoolRealArray( 2, 1, 1, 1, 1, 1, 1, 0, 1 ),
"update": 0,
"values": [ Vector2( 40, -58 ), Vector2( 21.6, -58.2 ), Vector2( -52, -59 ), Vector2( -55, -65 ), Vector2( -55, -101 ), Vector2( -52, -104 ), Vector2( 82, -103 ), Vector2( 88, -111 ), Vector2( -9, -432 ) ]
}

[sub_resource type="Animation" id=5]
resource_name = "idle_startpos"
length = 0.1
tracks/0/type = "value"
tracks/0/path = NodePath(".:position")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/keys = {
"times": PoolRealArray( 0 ),
"transitions": PoolRealArray( 1 ),
"update": 0,
"values": [ Vector2( 40, -58 ) ]
}

[sub_resource type="RectangleShape2D" id=6]
extents = Vector2( 12, 7 )

[sub_resource type="RectangleShape2D" id=7]
extents = Vector2( 19, 12 )

[sub_resource type="RectangleShape2D" id=8]
extents = Vector2( 29, 12 )

[sub_resource type="RectangleShape2D" id=9]
extents = Vector2( 7, 6 )

[sub_resource type="RectangleShape2D" id=10]
extents = Vector2( 8, 6 )

[sub_resource type="CanvasItemMaterial" id=11]
blend_mode = 3

[sub_resource type="RectangleShape2D" id=12]
extents = Vector2( 8, 5 )

[sub_resource type="RectangleShape2D" id=13]
extents = Vector2( 30, 10 )

[node name="2-6" instance=ExtResource( 3 )]

[node name="2-6" parent="Tilemaps" index="0" instance=ExtResource( 1 )]

[node name="UnshadedAbove" parent="Tilemaps/2-6" index="1"]
material = ExtResource( 2 )
z_index = 2

[node name="ShadedAbove" parent="Tilemaps/2-6" index="2"]
z_index = 2

[node name="Collision" type="TileMap" parent="Tilemaps" index="1"]
visible = false
tile_set = ExtResource( 6 )
cell_size = Vector2( 16, 16 )
format = 1
tile_data = PoolIntArray( -1966089, 0, 0, -1966088, 0, 0, -1966087, 0, 0, -1966086, 0, 0, -1966085, 0, 0, -1966084, 0, 0, -1966083, 0, 0, -1966082, 0, 0, -1966081, 0, 0, -2031611, 0, 0, -2031610, 0, 0, -2031609, 0, 0, -2031608, 0, 0, -1900553, 0, 0, -1900545, 0, 0, -1966080, 0, 0, -1966079, 0, 0, -1966078, 0, 0, -1966077, 0, 0, -1966076, 0, 0, -1966075, 0, 0, -1966072, 0, 0, -1835017, 0, 0, -1900536, 0, 0, -1769481, 0, 0, -1835000, 0, 0, -1703945, 0, 0, -1769464, 0, 0, -1638409, 0, 0, -1703928, 0, 0, -1703927, 0, 0, -1703926, 0, 0, -1703925, 0, 0, -1703924, 0, 0, -1703923, 0, 0, -1572873, 0, 0, -1638387, 0, 0, -1507337, 0, 0, -1507329, 0, 0, -1572864, 0, 0, -1572851, 0, 0, -1441801, 0, 0, -1441800, 0, 0, -1441799, 0, 0, -1441798, 0, 0, -1441797, 0, 0, -1441796, 0, 0, -1441795, 0, 0, -1441794, 0, 0, -1441793, 0, 0, -1507328, 0, 0, -1507327, 0, 0, -1507326, 0, 0, -1507325, 0, 0, -1507321, 0, 0, -1507320, 0, 0, -1507319, 0, 0, -1507318, 0, 0, -1507317, 0, 0, -1507316, 0, 0, -1441789, 0, 0, -1441785, 0, 0, -1376253, 0, 0, -1376249, 0, 0, -1310717, 0, 0, -1310713, 0, 0, -1245180, 0, 0, -1245178, 0, 0, -1179643, 0, 0, -589819, 0, 0, -458757, 0, 0, -458756, 0, 0, -458755, 0, 0, -458754, 0, 0, -458753, 0, 0, -524288, 0, 0, -524287, 0, 0, -524286, 0, 0, -524285, 0, 0, -524284, 0, 0, -524282, 0, 0, -524281, 0, 0, -393221, 0, 0, -458745, 0, 0, -327685, 0, 0, -327683, 0, 0, -327682, 0, 0, -327681, 0, 0, -393216, 0, 0, -393215, 0, 0, -393214, 0, 0, -393213, 0, 0, -393212, 0, 0, -393211, 0, 0, -393210, 0, 0, -393209, 0, 0, -262149, 0, 0, -262147, 0, 0, -262146, 0, 0, -262145, 0, 0, -327680, 0, 0, -327679, 0, 0, -327678, 0, 0, -327677, 0, 0, -327676, 0, 0, -327675, 0, 0, -327674, 0, 0, -327673, 0, 0, -196618, 0, 0, -196617, 0, 0, -196616, 0, 0, -196615, 0, 0, -196614, 0, 0, -196613, 0, 0, -262137, 0, 0, -262136, 0, 0, -262135, 0, 0, -262134, 0, 0, -262133, 0, 0, -262132, 0, 0, -131082, 0, 0, -196596, 0, 0, -65546, 0, 0, -131060, 0, 0, -10, 0, 0, -65524, 0, 0, 65526, 0, 0, 12, 0, 0, 131062, 0, 0, 65548, 0, 0, 196598, 0, 0, 131084, 0, 0, 262134, 0, 0, 196620, 0, 0, 327671, 0, 0, 327672, 0, 0, 327673, 0, 0, 327674, 0, 0, 327675, 0, 0, 327676, 0, 0, 327677, 0, 0, 327678, 0, 0, 327679, 0, 0, 262145, 0, 0, 262147, 0, 0, 262148, 0, 0, 262149, 0, 0, 262150, 0, 0, 262151, 0, 0, 262152, 0, 0, 262153, 0, 0, 262154, 0, 0, 262155, 0, 0, 262156, 0, 0, 327680, 0, 0, 327681, 0, 0, 327682, 0, 0 )

[node name="pizza_door" type="Sprite" parent="." index="2"]
position = Vector2( 88, -128 )
texture = ExtResource( 4 )
hframes = 4
frame = 3
script = ExtResource( 5 )

[node name="OnArea" type="Area2D" parent="pizza_door" index="0"]
position = Vector2( 0, 13 )

[node name="CollisionShape2D" type="CollisionShape2D" parent="pizza_door/OnArea" index="0"]
shape = SubResource( 1 )

[node name="AnimationPlayer" type="AnimationPlayer" parent="pizza_door" index="1"]
anims/close = SubResource( 2 )
anims/open = SubResource( 3 )

[node name="club_whiteboard" type="Sprite" parent="." index="3"]
position = Vector2( -95, -509 )
texture = ExtResource( 18 )

[node name="club_rug" type="Sprite" parent="." index="4"]
position = Vector2( -68, -439 )
texture = ExtResource( 23 )

[node name="Orange" parent="YSort" index="0" instance=ExtResource( 15 )]

[node name="Player" parent="YSort" index="1"]
position = Vector2( 24, 43 )

[node name="MalusHinter" parent="YSort" index="2" instance=ExtResource( 10 )]
position = Vector2( 40, -58 )
script = ExtResource( 11 )
up_down_periodic_mirroring = false

[node name="AnimatedSprite" parent="YSort/MalusHinter" index="3"]
frames = ExtResource( 16 )

[node name="CharacterMover" type="AnimationPlayer" parent="YSort/MalusHinter" index="4"]
autoplay = "idle_startpos"
anims/enter_club = SubResource( 4 )
anims/idle_startpos = SubResource( 5 )

[node name="DialogueTree" parent="YSort/MalusHinter" index="5" instance=ExtResource( 13 )]

[node name="Intro" parent="YSort/MalusHinter/DialogueTree" index="0" instance=ExtResource( 14 )]
message = "Wow, you actually came here."
expression = "smile"
face_texture = ExtResource( 12 )

[node name="Intro2" parent="YSort/MalusHinter/DialogueTree/Intro" index="0" instance=ExtResource( 14 )]
message = "Okay, now follow me. "
expression = "smug2"
face_texture = ExtResource( 12 )
function = "enter_club"

[node name="IntroClub" parent="YSort/MalusHinter/DialogueTree" index="1" instance=ExtResource( 14 )]
message = "Welcome to our club."
expression = "grin"
face_texture = ExtResource( 12 )

[node name="IntroClub2" parent="YSort/MalusHinter/DialogueTree/IntroClub" index="0" instance=ExtResource( 14 )]
message = "It's called the Amazing Cats club."
expression = "side_mouth"
face_texture = ExtResource( 12 )

[node name="IntroClub3" parent="YSort/MalusHinter/DialogueTree/IntroClub/IntroClub2" index="0" instance=ExtResource( 14 )]
message = "Made that name myself..."
expression = "open_mouth"
face_texture = ExtResource( 12 )

[node name="IntroClub4" parent="YSort/MalusHinter/DialogueTree/IntroClub/IntroClub2/IntroClub3" index="0" instance=ExtResource( 14 )]
message = "Why did we let you name the club..."
face_texture = ExtResource( 27 )

[node name="IntroClub5" parent="YSort/MalusHinter/DialogueTree/IntroClub/IntroClub2/IntroClub3/IntroClub4" index="0" instance=ExtResource( 14 )]
message = "Its meaning is now a bit more metaphorical since we're not all cats. "
expression = "side_mouth"
face_texture = ExtResource( 12 )

[node name="IntroClub6" parent="YSort/MalusHinter/DialogueTree/IntroClub/IntroClub2/IntroClub3/IntroClub4/IntroClub5" index="0" instance=ExtResource( 14 )]
message = "Ari, I named this club because what you came up with contained, like, three different swear words."
expression = "confused"
face_texture = ExtResource( 12 )

[node name="IntroClub7" parent="YSort/MalusHinter/DialogueTree/IntroClub/IntroClub2/IntroClub3/IntroClub4/IntroClub5/IntroClub6" index="0" instance=ExtResource( 14 )]
message = "So, this is that anti-Malus club I told you about."
expression = "neutral"
face_texture = ExtResource( 12 )

[node name="IntroClub8" parent="YSort/MalusHinter/DialogueTree/IntroClub/IntroClub2/IntroClub3/IntroClub4/IntroClub5/IntroClub6/IntroClub7" index="0" instance=ExtResource( 14 )]
message = "It has existed for the past 62 hours, 29 minutes, and 20 seconds."
expression = "neutral"
face_texture = ExtResource( 12 )

[node name="IntroClub9" parent="YSort/MalusHinter/DialogueTree/IntroClub/IntroClub2/IntroClub3/IntroClub4/IntroClub5/IntroClub6/IntroClub7/IntroClub8" index="0" instance=ExtResource( 14 )]
message = "He chose a really weird time to make it."
face_texture = ExtResource( 27 )

[node name="IntroClub10" parent="YSort/MalusHinter/DialogueTree/IntroClub/IntroClub2/IntroClub3/IntroClub4/IntroClub5/IntroClub6/IntroClub7/IntroClub8/IntroClub9" index="0" instance=ExtResource( 14 )]
message = "Yea. So, bottle kids, this large feline here is Ari. He's the Snack Chooser. He chooses the food we get here."
expression = "open_mouth"
face_texture = ExtResource( 12 )

[node name="IntroClub11" parent="YSort/MalusHinter/DialogueTree/IntroClub/IntroClub2/IntroClub3/IntroClub4/IntroClub5/IntroClub6/IntroClub7/IntroClub8/IntroClub9/IntroClub10" index="0" instance=ExtResource( 14 )]
message = "That lady over there is Alice."
expression = "open_mouth"
face_texture = ExtResource( 12 )

[node name="Ari2" parent="YSort" index="3" instance=ExtResource( 20 )]
position = Vector2( -36, -466 )
texture = ExtResource( 17 )

[node name="CollisionShape2D" parent="YSort/Ari2/Interaction" index="0"]
shape = SubResource( 6 )

[node name="ClubCouch" type="StaticBody2D" parent="YSort" index="4"]
position = Vector2( -44, -481 )

[node name="club_couch" type="Sprite" parent="YSort/ClubCouch" index="0"]
texture = ExtResource( 19 )
offset = Vector2( 0, 6 )

[node name="CollisionShape2D" type="CollisionShape2D" parent="YSort/ClubCouch" index="1"]
visible = false
position = Vector2( 7, 9 )
shape = SubResource( 7 )

[node name="ClubTable" type="StaticBody2D" parent="YSort" index="5"]
position = Vector2( -81, -395 )

[node name="Sprite" type="Sprite" parent="YSort/ClubTable" index="0"]
texture = ExtResource( 24 )
offset = Vector2( 0, -10 )

[node name="CollisionShape2D" type="CollisionShape2D" parent="YSort/ClubTable" index="1"]
visible = false
shape = SubResource( 8 )

[node name="ClubChair" type="StaticBody2D" parent="YSort" index="6"]
position = Vector2( -40, -394 )

[node name="Sprite" type="Sprite" parent="YSort/ClubChair" index="0"]
texture = ExtResource( 22 )
offset = Vector2( 0, -10 )

[node name="CollisionShape2D" type="CollisionShape2D" parent="YSort/ClubChair" index="1"]
visible = false
shape = SubResource( 9 )

[node name="Alex" parent="YSort" index="7" instance=ExtResource( 20 )]
position = Vector2( -104, -471 )
texture = ExtResource( 21 )
offset = Vector2( 0, -16 )

[node name="Alice" parent="YSort" index="8" instance=ExtResource( 20 )]
position = Vector2( -112, -443 )
texture = ExtResource( 26 )
offset = Vector2( 0, -13 )

[node name="ClubChairTilted" type="StaticBody2D" parent="YSort" index="9"]
position = Vector2( -112, -445 )

[node name="club_chair_tilted" type="Sprite" parent="YSort/ClubChairTilted" index="0"]
texture = ExtResource( 25 )
offset = Vector2( 0, -6 )

[node name="CollisionShape2D" type="CollisionShape2D" parent="YSort/ClubChairTilted" index="1"]
visible = false
shape = SubResource( 10 )

[node name="Light2D" type="Light2D" parent="." index="8"]
position = Vector2( -74, -449 )
scale = Vector2( 0.855469, 0.855469 )
texture = ExtResource( 7 )
color = Color( 1, 0.992157, 0.772549, 1 )
energy = 1.57
__meta__ = {
"_edit_lock_": true
}

[node name="Light2D2" type="Light2D" parent="." index="9"]
position = Vector2( 117, -459 )
scale = Vector2( 0.922852, 0.922852 )
texture = ExtResource( 7 )
color = Color( 0.796078, 0.0901961, 0.0901961, 1 )
energy = 1.57
__meta__ = {
"_edit_lock_": true
}

[node name="ShadeOverlay" type="Node2D" parent="." index="10"]
position = Vector2( -172, -581 )
z_index = 2
__meta__ = {
"_edit_lock_": true
}

[node name="ColorRect" type="ColorRect" parent="ShadeOverlay" index="0"]
modulate = Color( 0.372549, 0.4, 0.498039, 1 )
material = SubResource( 11 )
margin_left = -196.0
margin_top = -140.0
margin_right = 623.0
margin_bottom = 353.0
__meta__ = {
"_edit_lock_": true,
"_edit_use_anchors_": true
}

[node name="PositionPortal" parent="." index="11" instance=ExtResource( 8 )]
position = Vector2( 88, -122 )

[node name="CollisionShape2D" type="CollisionShape2D" parent="PositionPortal" index="0"]
shape = SubResource( 12 )

[node name="Position2D" type="Position2D" parent="PositionPortal" index="1"]
position = Vector2( 0, -196 )

[node name="PositionPortal2" parent="." index="12" instance=ExtResource( 8 )]
position = Vector2( 88, -296 )

[node name="CollisionShape2D" type="CollisionShape2D" parent="PositionPortal2" index="0"]
shape = SubResource( 12 )

[node name="Position2D" type="Position2D" parent="PositionPortal2" index="1"]
position = Vector2( 0, 191 )

[node name="ScenePortal" parent="." index="13" instance=ExtResource( 9 )]
position = Vector2( 24, 61 )
new_scene = "res://Rooms/Area2/2-1/2-1.tscn"
player_new_position = Vector2( 600, -272 )

[node name="CollisionShape2D" type="CollisionShape2D" parent="ScenePortal" index="0"]
position = Vector2( 0, 15 )
shape = SubResource( 13 )

[editable path="Tilemaps/2-6"]

[editable path="YSort/MalusHinter"]

[editable path="YSort/Ari2"]

[editable path="HUD"]
